#####################################################################
#   Includes
#####################################################################
[include mainsail.cfg]
[include configs/a_*.cfg]
#[include macros/macros.cfg]
#[include macros/nozzleparkclean.cfg]
#[include macros/TheFilter.cfg]
[include timelapse.cfg]
#[include config_backup.cfg]
[exclude_object]

#####################################################################
#   MCU
#####################################################################

[mcu CM4]
serial: /tmp/klipper_host_mcu

[mcu EBBCan]
canbus_uuid: 6e2b6ef48076

[mcu cartographer]
canbus_uuid: 9321f1c48fd0

[mcu]
canbus_uuid: d023fde6ff3f

[temperature_sensor Raspbery_CM4]
sensor_type: temperature_host
min_temp: 10
max_temp: 100


[temperature_sensor Manta_CPU]
sensor_type: temperature_mcu
min_temp: 10
max_temp: 100

[temperature_sensor EBBCan]
sensor_type: temperature_mcu
sensor_mcu: EBBCan
min_temp: 0
max_temp: 100

[temperature_sensor cartographer]
sensor_type: temperature_mcu
sensor_mcu: cartographer
min_temp: 5
max_temp: 105



[temperature_sensor Chamber]
sensor_pin: PB0
sensor_type: Generic 3950



[idle_timeout]
timeout: 1800


[printer]
kinematics: corexy
max_velocity: 300
max_accel: 5000
max_z_velocity: 10
max_z_accel: 30

#####################################################################
#   Cartographer
#####################################################################

[cartographer]
mcu: cartographer
x_offset: 0 # This is the offset of your probe from the nozzle tip, to the centre of the coil.
y_offset: 30 # This is the offset of your probe from the nozzle tip, to the centre of the coil.
verbose: yes # For extra output



####################################################################
## TEMPERATURE CONFIGURATIONS
####################################################################

# Compute module
# ----------------------------------------
# [temperature_sensor CM]
# sensor_type: temperature_host
# min_temp: 10
# max_temp: 100


# Toolhead board
# ----------------------------------------
# [temperature_sensor EBB36]
# sensor_type: temperature_mcu
# sensor_mcu: EBBCan



####################################################################
## MISC CONFIGURATIONS
####################################################################

# Klicky probe 
# ----------------------------------------


[safe_z_home]
home_xy_position:80,80
speed:333
z_hop:10
z_hop_speed:30
home_y_before_x: True

# Bed heater
# ----------------------------------------
[heater_bed]
heater_pin: PA1
sensor_type: ATC Semitec 104GT-2
sensor_pin: PB1
max_power: 1.0
min_temp: 0
max_temp: 120
control: pid
pid_kp: 58.437
pid_ki: 2.347
pid_kd: 363.769



####################################################################
## Z TILT CONFIGURATION
####################################################################

[z_tilt]
z_positions:

     -50, -13
      90, 217
      213, -13


points:

     20, 10
     90, 155
     160, 10


speed: 250
#   The speed (in mm/s) of non-probing moves during the calibration.
#   The default is 50.
horizontal_move_z: 5
#   The height (in mm) that the head should be commanded to move to
#   just prior to starting a probe operation. The default is 5.
retries: 15
#   Number of times to retry if the probed points aren't within
#   tolerance.
retry_tolerance: 0.0075
#   If retries are enabled then retry if largest and smallest probed
#   points differ more than retry_tolerance. Note the smallest unit of
#   change here would be a single step. However if you are probing
#   more points than steppers then you will likely have a fixed
#   minimum value for the range of probed points which you can learn
#   by observing command output.



####################################################################
## BED MESH CONFIGURATION
####################################################################

[bed_mesh]
zero_reference_position: 90, 90 # The centre of your bed. 
speed: 300
horizontal_move_z: 5
mesh_min: 20, 20 # The first probed coordinate, nearest to the origin. This coordinate is relative to the probe's location.
mesh_max: 170, 170 # The probed coordinate farthest from the origin. This is not necessarily the last point probed, as the probing process occurs in a zig-zag fashion. As with mesh_min, this coordinate is relative to the probe's location.
probe_count: 20, 20
adaptive_margin: 10
mesh_pps: 0,0 # Disable interpolation - mesh is probably dense enough


####################################################################
## PERSONAL CONFIGURATIONS
####################################################################


